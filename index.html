<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>

</head>
 <h1 style="background-color: aquamarine; color: black; text-align: center;">Appoinment Booking App</h1>
<body style="background-color:grey; color: aliceblue; text-align: center;">
  <form onsubmit="saveToLocalStorage(event)">
    <label>Name</label>
    <input type="text" name="username" placeholder="Enter User name" required>
    
    <label >EmailId</label>
    <input type="email" name="emailId" placeholder="Enter email Id" required>
  
    <label>Phone Number</label>
    <input type="tel" name="phonenumber" placeholder="Enter Phone Number" required>
    
    <button>Submit</button>
  </form>
  <ul id="listOfItems"></ul> 

  <script>
    function saveToLocalStorage(event){
  event.preventDefault();
  const name = event.target.username.value;
  const email = event.target.emailId.value;
  const phonenumber = event.target.phonenumber  .value;

  const obj = {
    name, 
    email,
    phonenumber
  }
 localStorage.setItem(obj.email, JSON.stringify(obj));
      showUserOnScreen(obj)
      function showUserOnScreen(obj){
      const parentElem = document.getElementById('listOfItems');
      parentElem.innerHTML += `<li> ${obj.name} - ${obj.email} - ${obj.phonenumber} </li>`;

window.addEventListener("DOMContentloaded", () =>{
   for(var i = 0; i< response.data.length;i++){
    showNewUserOnScreen(response.data[i])
   }

  })
  .then((err) =>{
    console.log(err)
  })
  const localStorageObj = localStorage;
  const localStorageKeys = Object.keys(localStorageObj);

  for(var i = 0; i<localStorageKeys.length;i++){
    const key = localStorageKeys[i]
    const userDetailsString = localStorageObj[key];
    const userDetailsObj = JSOn.parse(userDetailsString);
    showNewUserOnScreen(userDetailsObj);
  }
}

function showUserOnScreen(obj){
  const parentElem = document.getElementById('listOfItems')
  const childElem = document.createElement('li');
  childElem.textContent = obj.name + '-' + obj.email +'-' +obj.phonenumber

  const deleteButton = document.createElement('input')
  deleteButton.type = 'button'
  deleteButton.value = 'Delete'
  deleteButton.onclick = ()=>{
    localStorage.removeItem(obj.email)
    parentElem.removeChild(childElem)
  }

  const editButton = document.createElement('input')
  editButton.type = 'button'
  editButton.value = 'Edit'
  editButton.onclick = ()=>{
    localStorage.removeItem(obj.email)
    parentElem.removeChild(childElem)
    document.getElementById('usernameInputTag').value =obj.name
    document.getElementById('emailInputTag').value = obj.email
    Document.getElementById('phonenumberInputTag').value = obj.phonenumber
  }

  childElem.appendChild(deleteButton)
  childElem.appendChild(editButton)
  parentElem.appendChild(childElem)
}



}
  </script>
  
</body>
</html>